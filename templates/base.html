<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}LocalLife{% endblock %}</title>
  {%load static%}
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
</head>
<body>
  <div class="wrap">
    <header class="glass header">
      <div>
        <div class="brand">LocalLife</div>
        <div class="slogan">本地优先 · 隐私友好 · 精致生活控制台</div>
      </div>
      <div class="badge">可运行</div>
    </header>

    <nav class="glass tabs">
      {% if user.is_authenticated %}
        {% url 'core:dashboard' as dash_url %}
        {% url 'tasks:index' as tasks_url %}
        {% url 'habits:index' as habits_url %}
        {% url 'planner:index' as cal_url %}
        {% url 'news:home' as news_url %}
        {% url 'analytics_app:index' as ana_url %}
        {% url 'profiles:settings' as set_url %}
        <div class="tabs-left">
          <a class="tab {% if request.path == dash_url %}active{% endif %}" href="{{ dash_url }}">Dashboard</a>
          <a class="tab {% if request.path|slice:":7" == "/tasks/" %}active{% endif %}" href="{{ tasks_url }}">Tasks</a>
          <a class="tab {% if request.path|slice:":8" == "/habits/" %}active{% endif %}" href="{{ habits_url }}">Habits</a>
          <a class="tab {% if request.path|slice:":10" == "/calendar/" %}active{% endif %}" href="{{ cal_url }}">Calendar</a>
          <a class="tab {% if request.path|slice:":7" == "/news/" %}active{% endif %}" href="{{ news_url }}">News</a>
          <a class="tab {% if request.path|slice:":11" == "/analytics/" %}active{% endif %}" href="{{ ana_url }}">Analytics</a>
          <a class="tab {% if request.path|slice:":10" == "/settings/" %}active{% endif %}" href="{{ set_url }}">Settings</a>
        </div>
       
        <div class="tabs-right">
        <span class="tab subtle">你好，{{ user.username }}</span>
        <form method="post" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="tab subtle" style="background:transparent;border:0;cursor:pointer;">
            退出
          </button>
        </form>
      </div>
      {% else %}
        <div class="tabs-left">
          <a class="tab subtle">未登录</a>
        </div>
      {% endif %}

    </nav>

    <main>
      {% block content %}{% endblock %}
    </main>
  </div>
</body>
</html>
