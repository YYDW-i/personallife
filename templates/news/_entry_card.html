{# templates/news/_entry_card.html #}
{% load static %}
<div class="news-item {% if state and state.is_read %}is-read{% endif %}">
  <div class="news-title">
    <a href="{% url 'news:item_detail' item.id %}">{{ item.title }}</a>
  </div>

  <div class="news-meta">
    {% if item.source %}{{ item.source.name }}{% endif %}
    Â· {{ item.published_at|date:"m-d H:i" }}
    {% if item.item_type == "PAPER" %}
      Â· <span class="pill tiny">Paper</span>
      {% if item.doi %} Â· DOI: {{ item.doi }}{% endif %}
    {% else %}
      Â· <span class="pill tiny">News</span>
    {% endif %}
    Â· <a href="{{ item.url }}" target="_blank" rel="noreferrer">åŸæ–‡</a>
  </div>

  {% if item.summary %}
    <div class="news-summary">{{ item.summary|truncatechars:240 }}</div>
  {% endif %}

  <div class="news-actions">
    <button
      class="btn subtle js-toggle {% if state and state.is_read %}active{% endif %}"
      data-news-toggle="1"
      data-url="{% url 'news:toggle_item_state' item.id %}"
      data-field="is_read"
      data-on-text="å·²è¯» âœ“"
      data-off-text="æ ‡è®°å·²è¯»">
      {% if state and state.is_read %}å·²è¯» âœ“{% else %}æ ‡è®°å·²è¯»{% endif %}
    </button>

    <button
      class="btn subtle js-toggle {% if state and state.is_favorite %}active{% endif %}"
      data-news-toggle="1"
      data-url="{% url 'news:toggle_item_state' item.id %}"
      data-field="is_favorite"
      data-on-text="å·²æ”¶è— â˜…"
      data-off-text="æ”¶è—">
      {% if state and state.is_favorite %}å·²æ”¶è— â˜…{% else %}æ”¶è—{% endif %}
    </button>

    <button
      class="btn subtle js-toggle {% if state and state.is_later %}active{% endif %}"
      data-news-toggle="1"
      data-url="{% url 'news:toggle_item_state' item.id %}"
      data-field="is_later"
      data-on-text="ç¨åè¯» â³"
      data-off-text="ç¨åè¯»">
      {% if state and state.is_later %}ç¨åè¯» â³{% else %}ç¨åè¯»{% endif %}
    </button>

    <button
      class="btn danger js-toggle {% if state and state.is_blocked %}active{% endif %}"
      data-news-toggle="1"
      data-url="{% url 'news:toggle_item_state' item.id %}"
      data-field="is_blocked"
      data-on-text="å·²å±è”½ ğŸš«"
      data-off-text="å±è”½">
      {% if state and state.is_blocked %}å·²å±è”½ ğŸš«{% else %}å±è”½{% endif %}
    </button>
  </div>
</div>
