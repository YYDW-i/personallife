{% extends "base.html" %}
{% block title %}News · Preferences · LocalLife{% endblock %}

{% block content %}
<section class="glass card">
  <div class="cal-head">
    <div>
      <div class="card-title">News · 偏好设置</div>
      <div class="card-subtitle">选择你要订阅的频道/关键词/条数与推送时间</div>
    </div>
    <div class="cal-actions">
      <a class="btn subtle" href="{% url 'news:home' %}">返回</a>
    </div>
  </div>

  <form method="post" class="form news-pref">
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="alert danger">{{ form.non_field_errors }}</div>
    {% endif %}

    <div class="form-grid">
      <div class="form-row span-2">
        <label class="label">{{ form.categories.label }}</label>
        <div class="help muted">{{ form.categories.help_text }}</div>
        <div class="choices">{{ form.categories }}</div>
        {{ form.categories.errors }}
      </div>

      <div class="form-row">
        <label class="label">{{ form.language.label }}</label>
        {{ form.language }}
        {{ form.language.errors }}
        <div class="help muted">留空表示不限；例如 zh / en</div>
      </div>

      <div class="form-row">
        <label class="label">{{ form.region.label }}</label>
        {{ form.region }}
        {{ form.region.errors }}
        <div class="help muted">留空表示不限；例如 CN / US / Global</div>
      </div>

      <div class="form-row">
        <label class="label">{{ form.daily_limit.label }}</label>
        {{ form.daily_limit }}
        {{ form.daily_limit.errors }}
      </div>

      <div class="form-row">
        <label class="label">{{ form.push_time.label }}</label>
        {{ form.push_time }}
        {{ form.push_time.errors }}
      </div>

      <div class="form-row span-2">
        <label class="label">{{ form.include_keywords.label }}</label>
        {{ form.include_keywords }}
        {{ form.include_keywords.errors }}
        <div class="help muted">逗号/换行分隔；用于提升匹配度</div>
      </div>

      <div class="form-row span-2">
        <label class="label">{{ form.exclude_keywords.label }}</label>
        {{ form.exclude_keywords }}
        {{ form.exclude_keywords.errors }}
        <div class="help muted">用于过滤不想看到的内容</div>
      </div>

      <div class="form-row span-2">
        <label class="label">{{ form.include_academic.label }}</label>
        <div class="inline">
          {{ form.include_academic }} <span class="muted">同时推送论文/预印本（arXiv/Crossref/PubMed/OpenAlex）</span>
        </div>
        {{ form.include_academic.errors }}
      </div>
    </div>

    <div style="margin-top:14px; display:flex; gap:10px;">
      <button class="btn" type="submit">保存设置</button>
      <a class="btn subtle" href="{% url 'news:home' %}">取消</a>
    </div>
  </form>
</section>
{% endblock %}
